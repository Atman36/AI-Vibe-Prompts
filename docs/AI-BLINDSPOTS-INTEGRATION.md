# AI Blindspots Integration Guide

## Обзор

Этот документ описывает интеграцию принципов из [AI Blindspots](https://ezyang.github.io/ai-blindspots/) в систему AI-Vibe-Prompts для защиты от типичных "слепых зон" языковых моделей при разработке.

## Интегрированные принципы

### 1. Stop Digging (Прекратить копать)
**Проблема**: ИИ продолжает неэффективный подход вместо смены стратегии.

**Решение в AI-Vibe-Prompts**:
- **Orchestrator** отслеживает повторяющиеся действия агентов
- Команда `*stop-digging` для принудительной смены подхода
- Автоматическое обнаружение циклов после 3 неудачных попыток

```yaml
# В core-config.yaml
orchestrator:
  capabilities: ["stop-digging-detection"]
  monitoring:
    max_retry_cycles: 3
    effectiveness_threshold: 0.3
```

### 2. Preparatory Refactoring & Mise en Place
**Проблема**: ИИ сразу добавляет функции без подготовки кодовой базы.

**Решение**:
- **RefactorAssistant** - новый агент для подготовительного рефакторинга
- Обязательный этап подготовки перед реализацией
- Принцип "все на своих местах" перед началом разработки

```markdown
# Новый workflow
Planning → Refactoring → Implementation → Review
```

### 3. Requirements, not Solutions
**Проблема**: ИИ предлагает решения до понимания требований.

**Решение**:
- Обновленный **system-prompt.md** с правилом "Requirements First"
- **Architect** начинает с "что" и "зачем" перед "как"
- Обязательная валидация требований через **RAG Assistant**

### 4. Walking Skeleton
**Проблема**: ИИ строит сложные системы без проверки интеграций.

**Решение**:
- **Architect** планирует минимальный end-to-end прототип
- Приоритет интеграционному тестированию
- Проверка всех ключевых соединений на раннем этапе

### 5. Black Box Testing
**Проблема**: ИИ тестирует на основе кода, а не требований.

**Решение**:
- **Analyst** генерирует тесты на основе спецификаций
- Тестирование "снаружи" без знания реализации
- Фокус на пользовательских сценариях

### 6. Scientific Debugging
**Проблема**: ИИ применяет случайные исправления вместо систематического подхода.

**Решение**:
- **DebuggerAssistant** с методологией "гипотеза → эксперимент → вывод"
- Обязательное формулирование гипотез перед исправлениями
- Минимальные тестируемые изменения

### 7. Read the Docs & Respect the Spec
**Проблема**: ИИ игнорирует документацию и отклоняется от спецификаций.

**Решение**:
- **RAG Assistant** как обязательный шлюз качества
- Валидация всех решений против документации
- Блокировка реализации при несоответствии спецификациям

### 8. Know Your Limits
**Проблема**: ИИ дает уверенные, но неверные ответы.

**Решение**:
- Правило в **system-prompt.md** об ограничениях компетенции
- Обязательное указание неопределенности
- Эскалация к Orchestrator при сомнениях

## Обновленная архитектура агентов

### Новые агенты
1. **RefactorAssistant** - подготовительный рефакторинг
2. **DebuggerAssistant** - научная отладка
3. **RAG Assistant (Enhanced)** - шлюз качества

### Обновленные агенты
1. **Orchestrator** - мониторинг эффективности агентов
2. **Architect** - фокус на требованиях и Walking Skeleton
3. **Analyst** - Black Box тестирование
4. **Developer** - интеграция с RefactorAssistant

## Новые команды

### Orchestrator Commands
- `*stop-digging` - остановить неэффективный подход
- `*requirements-check` - проверить фокус на требованиях
- `*progress-audit` - оценить реальный прогресс

### Workflow Commands
- `*refactor [feature]` - подготовить код для новой функции
- `*debug-scientific [issue]` - систематическая отладка
- `*validate-spec [implementation]` - проверить соответствие спецификации

## Обновленные workflow

### Enhanced Development Workflow
```yaml
phases:
  1_analysis: "Architect анализирует требования (не решения)"
  2_refactoring: "RefactorAssistant подготавливает кодовую базу"
  3_validation: "RAG Assistant валидирует план против документации"
  4_implementation: "Developer реализует с готовой базой"
  5_testing: "Analyst проводит Black Box тестирование"
  6_review: "Orchestrator проверяет качество и эффективность"
```

### Quality Gates
Каждый переход между фазами требует:
- ✅ Валидация RAG Assistant
- ✅ Проверка соответствия требованиям
- ✅ Отсутствие технического долга
- ✅ Готовность к следующей фазе

## Метрики эффективности

### Защита от Blindspots
- **Stop Digging Rate**: % случаев успешного обнаружения зацикливания
- **Requirements Compliance**: % проектов, начинающихся с требований
- **Spec Adherence**: % реализаций, соответствующих документации
- **Refactoring Effectiveness**: улучшение качества кода перед реализацией

### Качество разработки
- **Bug Reduction**: снижение количества багов благодаря Scientific Debugging
- **Integration Success**: % успешных интеграций благодаря Walking Skeleton
- **Test Coverage**: улучшение покрытия благодаря Black Box Testing
- **Documentation Compliance**: % решений, основанных на актуальной документации

## Примеры использования

### Пример 1: Добавление аутентификации
```bash
# Старый подход
*developer "добавь аутентификацию"

# Новый подход с защитой от Blindspots
*requirements-check "аутентификация"  # Сначала требования
*refactor "auth-preparation"          # Подготовка кода
*validate-spec "auth-requirements"    # Проверка спецификации
*developer "implement auth"           # Реализация
```

### Пример 2: Отладка производительности
```bash
# Старый подход
*developer "исправь медленную загрузку"

# Новый подход с Scientific Debugging
*debug-scientific "slow page load"
# DebuggerAssistant формирует гипотезы:
# 1. Большой bundle size
# 2. Неэффективные запросы к API
# 3. Отсутствие кэширования
# Тестирует каждую гипотезу систематически
```

## Заключение

Интеграция AI Blindspots превращает AI-Vibe-Prompts из набора инструментов в защищенную систему разработки, которая:

1. **Предотвращает** типичные ошибки ИИ
2. **Обеспечивает** качество через обязательные проверки
3. **Ускоряет** разработку через правильную подготовку
4. **Повышает** надежность через систематические подходы

Система теперь не просто помогает писать код, но и активно защищает от ошибок, характерных для ИИ-ассистированной разработки.